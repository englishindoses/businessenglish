<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business English | Interview Skills</title>
    <link rel="stylesheet" href="css/lessons.css">
    <link rel="stylesheet" href="css/drop-down.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <style>
        /* Compact warm-up styles for this lesson */
        .warmup-compact {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .warmup-question {
            background: var(--color-bg);
            border-radius: var(--radius-sm);
            padding: 1rem 1.25rem;
            border-left: 4px solid var(--color-primary);
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }
        .warmup-question .question-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }
        .warmup-question p {
            margin: 0;
            color: var(--color-text);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        /* 4-column sorting grid */
        .sorting-zones-4 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        @media (max-width: 600px) {
            .sorting-zones-4 {
                grid-template-columns: 1fr;
            }
        }
        /* Taller notes box */
        .notes-input-tall {
            min-height: 160px;
        }
    </style>
</head>
<body data-lesson="3">
    <header class="header">
        <a href="index.html" class="back-link">‚Üê Back to Course</a>
        <div class="header-content">
            <div class="header-badge">Lesson 3</div>
            <h1>Interview Skills</h1>
            <p class="header-subtitle">Essential expressions for confident interview answers</p>
        </div>
        <div class="header-decoration"></div>
    </header>

    <main class="container">
        <!-- Activity 1: Discussion Warm-up (Compact) -->
        <section class="section" id="activity1">
            <div class="section-header">
                <span class="section-number">Activity 1/5</span>
                <h2>Warm-up: Your Interview Experience</h2>
            </div>
            <p class="section-intro">Discuss these questions with your teacher.</p>

            <div class="warmup-compact">
                <div class="warmup-question">
                    <span class="question-icon">üéØ</span>
                    <p>Think back to a job interview you've had. What went well? What would you do differently?</p>
                </div>
                <div class="warmup-question">
                    <span class="question-icon">üò∞</span>
                    <p>What do you find most difficult about interviews in English? Is it finding the right words, structuring your answers, or something else?</p>
                </div>
                <div class="warmup-question">
                    <span class="question-icon">üíº</span>
                    <p>Are you preparing for any interviews at the moment? What kind of role or company are you interested in?</p>
                </div>
            </div>
        </section>

        <!-- Activity 2: Sorting Expressions -->
        <section class="section" id="activity2">
            <div class="section-header">
                <span class="section-number">Activity 2/5</span>
                <h2>Key Interview Expressions</h2>
            </div>
            <p class="section-intro">These expressions will help you sound confident and professional in interviews. Sort them into the correct categories.</p>
            
            <div class="sorting-activity">
                <div class="phrase-bank" id="phraseBank">
                    <div class="phrase" data-category="experience" draggable="true">I was responsible for...</div>
                    <div class="phrase" data-category="thinking" draggable="true">That's a great question.</div>
                    <div class="phrase" data-category="experience" draggable="true">One of my key achievements was...</div>
                    <div class="phrase" data-category="softening" draggable="true">I would say that...</div>
                    <div class="phrase" data-category="structuring" draggable="true">To give you an example...</div>
                    <div class="phrase" data-category="thinking" draggable="true">Let me think about that for a moment.</div>
                    <div class="phrase" data-category="softening" draggable="true">I tend to...</div>
                    <div class="phrase" data-category="structuring" draggable="true">This led to...</div>
                    <div class="phrase" data-category="experience" draggable="true">I successfully managed to...</div>
                    <div class="phrase" data-category="softening" draggable="true">I believe I'm quite good at...</div>
                    <div class="phrase" data-category="structuring" draggable="true">As a result...</div>
                    <div class="phrase" data-category="thinking" draggable="true">If I had to choose, I'd say...</div>
                </div>
                
                <div class="sorting-zones sorting-zones-4">
                    <div class="sort-zone" id="experienceZone" data-category="experience">
                        <h4>üíº Describing Experience</h4>
                        <p class="zone-hint">Talking about your past work and achievements</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="thinkingZone" data-category="thinking">
                        <h4>‚è±Ô∏è Buying Thinking Time</h4>
                        <p class="zone-hint">Phrases to use while you think of your answer</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="softeningZone" data-category="softening">
                        <h4>üéØ Softening & Hedging</h4>
                        <p class="zone-hint">Making your answers sound balanced and thoughtful</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="structuringZone" data-category="structuring">
                        <h4>üîó Structuring & Connecting</h4>
                        <p class="zone-hint">Organising your ideas and showing cause & effect</p>
                        <div class="zone-content"></div>
                    </div>
                </div>
            </div>
            <button class="check-btn" onclick="checkSorting()">Check Answers</button>
            <button class="reset-btn" onclick="resetSorting()">Reset</button>
            <div class="feedback" id="sortingFeedback"></div>

            <div class="reveal-box">
                <div class="reveal-header" onclick="toggleRevealBox(this)">
                    <h4>üìù More Useful Expressions</h4>
                    <span class="reveal-hint">Click to reveal ‚Üí</span>
                </div>
                <div class="reveal-content">
                    <ul>
                        <li><strong>I played a key role in...</strong> ‚Äî Describing involvement</li>
                        <li><strong>What I learned from that experience was...</strong> ‚Äî Showing reflection</li>
                        <li><strong>That's something I'm working on improving.</strong> ‚Äî Addressing weaknesses honestly</li>
                        <li><strong>In that situation, I decided to...</strong> ‚Äî Explaining decisions</li>
                        <li><strong>Looking back, I'm proud that...</strong> ‚Äî Highlighting achievements</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Activity 3: Drop-down Gap-fill -->
        <section class="section" id="activity3">
            <div class="section-header">
                <span class="section-number">Activity 3/5</span>
                <h2>Expressions in Context</h2>
            </div>
            <p class="section-intro">Now practise using these expressions. Choose the best phrase to complete each interview answer.</p>

            <div class="dropdown-activity" id="dropdownActivity1">
                <div class="dropdown-sentence">
                    <span class="sentence-number">1</span>
                    <span class="sentence-context">Question: "Tell me about your current role."</span>
                    <p>
                        <select class="gap-dropdown" data-answer="I'm responsible for">
                            <option value="">Select an expression...</option>
                            <option value="I'm responsible for">I'm responsible for</option>
                            <option value="As a result">As a result</option>
                            <option value="Let me think">Let me think</option>
                        </select>
                        managing a team of five people and overseeing all our marketing campaigns in the APAC region.
                    </p>
                </div>

                <div class="dropdown-sentence">
                    <span class="sentence-number">2</span>
                    <span class="sentence-context">Question: "What's your greatest strength?"</span>
                    <p>
                        <select class="gap-dropdown" data-answer="I would say that">
                            <option value="">Select an expression...</option>
                            <option value="I would say that">I would say that</option>
                            <option value="This led to">This led to</option>
                            <option value="I was responsible for">I was responsible for</option>
                        </select>
                        my greatest strength is my ability to stay calm under pressure.
                        <select class="gap-dropdown" data-answer="To give you an example">
                            <option value="">Select an expression...</option>
                            <option value="To give you an example">To give you an example</option>
                            <option value="I tend to">I tend to</option>
                            <option value="That's a great question">That's a great question</option>
                        </select>,
                        last year we had a major product launch that got moved forward by three weeks, and I coordinated the entire team to deliver on time.
                    </p>
                </div>

                <div class="dropdown-sentence">
                    <span class="sentence-number">3</span>
                    <span class="sentence-context">Question: "Tell me about a challenge you've faced at work."</span>
                    <p>
                        <select class="gap-dropdown" data-answer="One of my key achievements was">
                            <option value="">Select an expression...</option>
                            <option value="One of my key achievements was">One of my key achievements was</option>
                            <option value="Let me think about that">Let me think about that</option>
                            <option value="I tend to">I tend to</option>
                        </select>
                        turning around a struggling project. The team was behind schedule and morale was low. I introduced daily check-ins and broke the work into smaller milestones.
                        <select class="gap-dropdown" data-answer="As a result">
                            <option value="">Select an expression...</option>
                            <option value="As a result">As a result</option>
                            <option value="I would say that">I would say that</option>
                            <option value="That's a great question">That's a great question</option>
                        </select>,
                        we delivered the project on time and the client extended their contract with us.
                    </p>
                </div>

                <div class="dropdown-sentence">
                    <span class="sentence-number">4</span>
                    <span class="sentence-context">Question: "What's your management style?"</span>
                    <p>
                        <select class="gap-dropdown" data-answer="I tend to">
                            <option value="">Select an expression...</option>
                            <option value="I tend to">I tend to</option>
                            <option value="This led to">This led to</option>
                            <option value="One of my key achievements was">One of my key achievements was</option>
                        </select>
                        be quite collaborative.
                        <select class="gap-dropdown" data-answer="I believe">
                            <option value="">Select an expression...</option>
                            <option value="I believe">I believe</option>
                            <option value="As a result">As a result</option>
                            <option value="I was responsible for">I was responsible for</option>
                        </select>
                        the best results come from giving people ownership of their work while being available to support them when needed.
                    </p>
                </div>
            </div>
            <button class="check-btn" onclick="checkDropdownAnswers('dropdownActivity1')">Check Answers</button>
            <button class="reset-btn" onclick="resetDropdownActivity('dropdownActivity1')">Reset</button>
            <div class="feedback" id="dropdownActivity1Feedback"></div>

            <div class="reflection-card" style="margin-top: 1.5rem;">
                <h4>üìã Notes</h4>
                <p>Space to make any notes you want.</p>
                <textarea class="notes-input" placeholder="Your notes..."></textarea>
            </div>
        </section>

        <!-- Activity 4: The STAR Method (Bonus Tip) -->
        <section class="section" id="activity4">
            <div class="section-header">
                <span class="section-number">Activity 4/5</span>
                <h2>‚≠ê Bonus Tip: The STAR Method</h2>
            </div>
            <p class="section-intro">The STAR method helps you structure clear, complete answers to behavioural questions like "Tell me about a time when..." Click each card to see useful expressions for each part.</p>

            <div class="phrase-cards">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">S - Situation</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"In my previous role at..."<br>"We were facing a situation where..."<br>"At the time, the company was..."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">T - Task</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"I was responsible for..."<br>"My task was to..."<br>"I needed to..."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">A - Action</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"So I decided to..."<br>"The first thing I did was..."<br>"I took the initiative to..."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">R - Result</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"As a result..."<br>"This led to..."<br>"The outcome was..."</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="practice-prompt" style="margin-top: 1.5rem;">
                <h4>üí¨ Practice Question</h4>
                <p><strong>"Tell me about a time when you had to learn something new quickly."</strong></p>
                <p style="margin-top: 0.5rem; font-size: 0.9rem;">Use the STAR method and the expressions from this lesson to answer. Your teacher will give you feedback.</p>
            </div>

            <div class="reflection-card" style="margin-top: 1.5rem;">
                <h4>üìã Plan Your Answer</h4>
                <p>Make notes for each part of your STAR answer:</p>
                <textarea class="notes-input notes-input-tall" placeholder="S - Situation: &#10;&#10;T - Task: &#10;&#10;A - Action: &#10;&#10;R - Result:"></textarea>
            </div>
        </section>

        <!-- Activity 5: Mock Interview Role Play -->
        <section class="section" id="activity5">
            <div class="section-header">
                <span class="section-number">Activity 5/5</span>
                <h2>Mock Interview Practice</h2>
            </div>
            <p class="section-intro">Now it's time to put everything together! Your teacher will ask you these questions. Use the STAR method and the expressions you've learned.</p>

            <div class="scenario-cards">
                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">‚ö°</div>
                    <h4>Question 1</h4>
                    <p>"Tell me about a time when you had to deal with a difficult situation at work."</p>
                    <div class="scenario-goals">
                        <span>Focus on:</span> How you handled pressure, what actions you took, and the positive outcome
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">üë•</div>
                    <h4>Question 2</h4>
                    <p>"Can you give me an example of when you worked successfully as part of a team?"</p>
                    <div class="scenario-goals">
                        <span>Focus on:</span> Your role in the team, how you collaborated, and what you achieved together
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">üèÜ</div>
                    <h4>Question 3</h4>
                    <p>"Describe a project or achievement you're particularly proud of."</p>
                    <div class="scenario-goals">
                        <span>Focus on:</span> Why it was challenging, what you did, and the results you achieved
                    </div>
                </div>
            </div>

            <div class="roleplay-tips">
                <h4>üí° Remember to:</h4>
                <ul>
                    <li>Use the STAR structure to organise your answer</li>
                    <li>Include specific details and numbers where possible</li>
                    <li>Use expressions for buying time if you need a moment to think</li>
                    <li>Use softening language to sound balanced and professional</li>
                    <li>End with a clear result or what you learned</li>
                </ul>
            </div>

            <div class="reflection-card" style="margin-top: 1.5rem;">
                <h4>üìã Notes</h4>
                <p>Space to make any notes you want.</p>
                <textarea class="notes-input" placeholder="Your notes..."></textarea>
            </div>
        </section>

        <!-- Wrap Up -->
        <section class="section wrap-up" id="wrapup">
            <div class="section-header">
                <span class="section-number">Wrap Up</span>
                <h2>Reflection & Next Steps</h2>
            </div>
            
            <div class="reflection-grid">
                <div class="reflection-card">
                    <h4>üåü Key Expressions to Remember</h4>
                    <p>Which 3-4 expressions from today will be most useful for you?</p>
                    <textarea class="notes-input" placeholder="Write your favourite expressions here..."></textarea>
                </div>
                <div class="reflection-card">
                    <h4>üìã Preparation Task</h4>
                    <p>Think of 2-3 situations from your work experience that you could use for STAR answers. Note the key points here.</p>
                    <textarea class="notes-input" placeholder="Situation 1: &#10;&#10;Situation 2: &#10;&#10;Situation 3:"></textarea>
                </div>
            </div>
        </section>

        <!-- Lesson Completion Section -->
        <section class="section lesson-completion" id="completion">
            <div class="completion-content">
                <div class="completion-icon" id="completionIcon">üìö</div>
                <h3 id="completionTitle">You've reached the end of Lesson 3!</h3>
                <p id="completionText">Well done on completing the activities. If you're happy with your progress, mark this lesson as complete to track your journey through the course.</p>
                <div class="completion-buttons">
                    <a href="lesson2.html" class="nav-btn">‚Üê Previous Lesson</a>
                    <button class="complete-lesson-btn" id="completeBtn" onclick="toggleLessonCompletion()">
                        <span class="btn-icon">‚úì</span>
                        <span class="btn-text">Mark as Complete</span>
                    </button>
                    <a href="index.html" class="nav-btn nav-btn-primary">üè† Home</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>Business English Course by English in Doses</p>
    </footer>

    <!-- Load activities.js as ES module -->
    <script type="module" src="js/activities.js"></script>
    <!-- Load drop-down.js for gap-fill activity -->
    <script type="module" src="js/drop-down.js"></script>
    
    <!-- Lesson completion functionality -->
    <script type="module">
        import { 
            isLessonComplete, 
            markLessonComplete, 
            markLessonIncomplete,
            getCurrentUser
        } from './js/lesson-utils.js';
        
        const LESSON_NUMBER = parseInt(document.body.dataset.lesson);
        let isComplete = false;
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async function() {
            await initializeCompletion();
        });
        
        async function initializeCompletion() {
            const username = getCurrentUser();
            if (username) {
                isComplete = await isLessonComplete(LESSON_NUMBER);
                updateCompletionUI();
            }
        }
        
        function updateCompletionUI() {
            const icon = document.getElementById('completionIcon');
            const title = document.getElementById('completionTitle');
            const text = document.getElementById('completionText');
            const btn = document.getElementById('completeBtn');
            const section = document.querySelector('.lesson-completion');
            
            if (isComplete) {
                icon.textContent = 'üéâ';
                title.textContent = 'Lesson Complete!';
                text.textContent = 'Fantastic work! You\'ve completed this lesson. Keep up the momentum and continue to the next lesson when you\'re ready.';
                btn.innerHTML = '<span class="btn-icon">‚Ü©</span><span class="btn-text">Mark as Incomplete</span>';
                btn.classList.add('completed');
                section.classList.add('is-complete');
            } else {
                icon.textContent = 'üìö';
                title.textContent = `You've reached the end of Lesson ${LESSON_NUMBER}!`;
                text.textContent = 'Well done on completing the activities. If you\'re happy with your progress, mark this lesson as complete to track your journey through the course.';
                btn.innerHTML = '<span class="btn-icon">‚úì</span><span class="btn-text">Mark as Complete</span>';
                btn.classList.remove('completed');
                section.classList.remove('is-complete');
            }
        }
        
        // Make toggle function globally accessible
        window.toggleLessonCompletion = async function() {
            const btn = document.getElementById('completeBtn');
            const username = getCurrentUser();
            
            if (!username) {
                alert('Please log in on the homepage first to track your progress.');
                return;
            }
            
            // Disable button during operation
            btn.disabled = true;
            btn.style.opacity = '0.7';
            
            try {
                if (isComplete) {
                    await markLessonIncomplete(LESSON_NUMBER);
                    isComplete = false;
                } else {
                    await markLessonComplete(LESSON_NUMBER);
                    isComplete = true;
                }
                
                updateCompletionUI();
                
                // Visual feedback
                btn.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    btn.style.transform = '';
                }, 150);
            } catch (error) {
                console.error('Error toggling completion:', error);
                alert('There was an error saving your progress. Please try again.');
            } finally {
                btn.disabled = false;
                btn.style.opacity = '1';
            }
        };
        
        window.scrollToTop = function(event) {
            event.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        };
    </script>
</body>
</html>