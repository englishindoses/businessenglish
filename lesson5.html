<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business English | Phone and Video Call Communication</title>
    <link rel="stylesheet" href="css/lessons.css">
    <link rel="stylesheet" href="css/right-wrong.css">
    <link rel="stylesheet" href="css/compact-matching.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
</head>
<body data-lesson="5">
    <header class="header">
        <a href="index.html" class="back-link">‚Üê Back to Course</a>
        <div class="header-content">
            <div class="header-badge">Lesson 5</div>
            <h1>Phone and Video Call Communication</h1>
            <p class="header-subtitle">Building confidence and clarity in telephone and video conference communication.</p>
        </div>
        <div class="header-decoration"></div>
    </header>

    <main class="container">
        <!-- Warm-up Section -->
        <section class="section" id="warmup">
            <div class="section-header">
                <span class="section-number">Warm-up</span>
                <h2>Phone Calls vs Face-to-Face</h2>
            </div>
            <p class="section-intro">Discuss these questions with your teacher.</p>

            <div class="discussion-grid single-column">
                <div class="discussion-card">
                    <div class="card-icon">üìû</div>
                    <h3>Discussion Questions</h3>
                    <ul class="discussion-questions">
                        <li>What do you find most challenging about making phone calls in English compared to face-to-face conversations?</li>
                        <li>Do you prefer video calls or audio-only calls for work? Why?</li>
                        <li>Have you ever experienced technical difficulties during an important call? How did you handle it?</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Quick Grammar Tip Section -->
        <section class="section grammar-tip" id="grammar">
            <div class="section-header">
                <span class="section-number">üí° Quick Tip</span>
                <h2>Don't / Doesn't + Verb</h2>
            </div>
            <p class="section-intro">A quick reminder of negative forms in the present simple.</p>

            <div class="language-box">
                <h4>üìò The Rule</h4>
                <ul>
                    <li><strong>I / You / We / They</strong> ‚Üí <strong>don't</strong> + base verb</li>
                    <li><strong>He / She / It</strong> ‚Üí <strong>doesn't</strong> + base verb</li>
                    <li><strong>Important:</strong> After <em>doesn't</em>, use the base verb ‚Äî never add <em>-s</em>.</li>
                </ul>
            </div>

            <div class="language-box">
                <h4>üìò Examples</h4>
                <ul>
                    <li>I <strong>don't handle</strong> client complaints.</li>
                    <li>We <strong>don't have</strong> approval yet.</li>
                    <li>She <strong>doesn't manage</strong> the overseas accounts.</li>
                    <li>The system <strong>doesn't have</strong> that feature.</li>
                </ul>
            </div>

            <div class="reveal-box" id="brazilianNote">
                <div class="reveal-header" onclick="toggleRevealBox(this)">
                    <h4>üáßüá∑ Brazilian Learner Note</h4>
                    <span class="reveal-hint">Click to reveal ‚Üí</span>
                </div>
                <div class="reveal-content">
                    <ul>
                        <li>‚úó <em style="text-decoration: line-through;">He don't have the report.</em></li>
                        <li>‚úì <strong>He doesn't have the report.</strong></li>
                        <li>‚úó <em style="text-decoration: line-through;">She doesn't has time.</em></li>
                        <li>‚úì <strong>She doesn't have time.</strong></li>
                        <li>Remember: <em>doesn't</em> already carries the third person ‚Äî no need for <em>has</em> or verb + <em>s</em>.</li>
                    </ul>
                </div>
            </div>

            <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">Practice: Right or Wrong?</h3>
            <p class="section-intro">Click ‚úì if the sentence is correct, or ‚úó if it contains a mistake.</p>

            <div class="right-wrong-activity" id="grammarActivity">
                <div class="rw-sentence" data-correct="true">
                    <span class="rw-text">The manager doesn't approve expenses over ‚Ç¨5,000.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction"></div>
                </div>

                <div class="rw-sentence" data-correct="false">
                    <span class="rw-text">We doesn't have the updated contract.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction">‚úì We <strong>don't have</strong> the updated contract.</div>
                </div>

                <div class="rw-sentence" data-correct="false">
                    <span class="rw-text">The software don't support video calls.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction">‚úì The software <strong>doesn't support</strong> video calls.</div>
                </div>

                <div class="rw-sentence" data-correct="true">
                    <span class="rw-text">I don't handle procurement requests.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction"></div>
                </div>

                <div class="rw-sentence" data-correct="false">
                    <span class="rw-text">She doesn't has access to the database.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction">‚úì She <strong>doesn't have</strong> access to the database.</div>
                </div>

                <div class="rw-sentence" data-correct="true">
                    <span class="rw-text">They don't have the budget for new equipment.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction"></div>
                </div>

                <div class="rw-sentence" data-correct="false">
                    <span class="rw-text">The report don't include the Q3 figures.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction">‚úì The report <strong>doesn't include</strong> the Q3 figures.</div>
                </div>

                <div class="rw-sentence" data-correct="true">
                    <span class="rw-text">Our branch doesn't have a dedicated IT team.</span>
                    <div class="rw-buttons">
                        <button class="rw-btn tick" aria-label="Correct">‚úì</button>
                        <button class="rw-btn cross" aria-label="Wrong">‚úó</button>
                    </div>
                    <span class="rw-result"></span>
                    <div class="rw-correction"></div>
                </div>
            </div>
            <button class="check-btn" onclick="checkRightWrong('grammarActivity')">Check Answers</button>
            <button class="reset-btn" onclick="resetRightWrong('grammarActivity')">Reset</button>
            <div class="feedback" id="grammarActivityFeedback"></div>
        </section>

        <!-- Key Language Presentation: Sorting Activity -->
        <section class="section" id="activity1">
            <div class="section-header">
                <span class="section-number">Activity 1</span>
                <h2>Key Phrases for Phone and Video Calls</h2>
            </div>
            <p class="section-intro">Sort these phrases into the correct category. Think about which stage of a call you would use each phrase.</p>
            
            <div class="sorting-activity">
                <div class="phrase-bank" id="phraseBank">
                    <!-- Opening Calls -->
                    <div class="phrase" data-category="opening" draggable="true">Good morning, this is [name] from [company].</div>
                    <div class="phrase" data-category="opening" draggable="true">I'm calling regarding the proposal we discussed.</div>
                    <div class="phrase" data-category="opening" draggable="true">Is this a good time to talk?</div>
                    <!-- Clarification -->
                    <div class="phrase" data-category="clarification" draggable="true">Sorry, could you repeat that?</div>
                    <div class="phrase" data-category="clarification" draggable="true">Let me just confirm ‚Äî you said Friday at 3pm?</div>
                    <div class="phrase" data-category="clarification" draggable="true">Could you spell that for me? That's B for Bravo...</div>
                    <!-- Technical Issues -->
                    <div class="phrase" data-category="technical" draggable="true">I think there's a delay on the line.</div>
                    <div class="phrase" data-category="technical" draggable="true">You're breaking up. Let me try reconnecting.</div>
                    <div class="phrase" data-category="technical" draggable="true">I can't hear you ‚Äî you're on mute.</div>
                    <!-- Closing Calls -->
                    <div class="phrase" data-category="closing" draggable="true">Thanks for your time today.</div>
                    <div class="phrase" data-category="closing" draggable="true">I'll send you a summary by email.</div>
                    <div class="phrase" data-category="closing" draggable="true">I'll be in touch. Speak soon!</div>
                </div>
                
                <div class="sorting-zones four-zones">
                    <div class="sort-zone" id="openingZone" data-category="opening">
                        <h4>üìû Opening Calls</h4>
                        <p class="zone-hint">Starting professionally.</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="clarificationZone" data-category="clarification">
                        <h4>üîç Clarifying</h4>
                        <p class="zone-hint">Checking understanding.</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="technicalZone" data-category="technical">
                        <h4>‚ö†Ô∏è Technical Issues</h4>
                        <p class="zone-hint">Handling problems.</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="closingZone" data-category="closing">
                        <h4>üëã Closing Calls</h4>
                        <p class="zone-hint">Ending professionally.</p>
                        <div class="zone-content"></div>
                    </div>
                </div>
            </div>
            <button class="check-btn" onclick="checkSorting()">Check Answers</button>
            <button class="reset-btn" onclick="resetSorting()">Reset</button>
            <div class="feedback" id="sortingFeedback"></div>

            <div class="reveal-box" id="morePhrases">
                <div class="reveal-header" onclick="toggleRevealBox(this)">
                    <h4>üìù More Useful Phrases</h4>
                    <span class="reveal-hint">Complete the sorting first, then click to reveal ‚Üí</span>
                </div>
                <div class="reveal-content">
                    <ul>
                        <li><strong>Opening:</strong> "Do you have a few minutes?" / "I'm calling about..."</li>
                        <li><strong>Clarifying:</strong> "I didn't quite catch that." / "So just to clarify..."</li>
                        <li><strong>Technical:</strong> "There seems to be an echo." / "My connection is unstable."</li>
                        <li><strong>Closing:</strong> "I'll follow up in writing." / "Let's touch base next week."</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Controlled Practice 1: Compact Matching -->
        <section class="section" id="activity2">
            <div class="section-header">
                <span class="section-number">Activity 2</span>
                <h2>Matching Phrases to Situations</h2>
            </div>
            <p class="section-intro">Match each phrase to the situation where you would use it. Drag the numbers to the correct answer.</p>

            <div class="compact-matching" id="compactMatching1">
                <div class="cm-phrases">
                    <div class="cm-phrase">
                        <span class="cm-marker-slot" data-marker="1">
                            <span class="cm-marker" data-match="1" draggable="true">1</span>
                        </span>
                        <p>"Sorry, could you speak up a little?"</p>
                    </div>
                    <div class="cm-phrase">
                        <span class="cm-marker-slot" data-marker="2">
                            <span class="cm-marker" data-match="2" draggable="true">2</span>
                        </span>
                        <p>"Let me just confirm ‚Äî you said the deadline is the 15th?"</p>
                    </div>
                    <div class="cm-phrase">
                        <span class="cm-marker-slot" data-marker="3">
                            <span class="cm-marker" data-match="3" draggable="true">3</span>
                        </span>
                        <p>"I think we have a bad connection. Can I call you back?"</p>
                    </div>
                    <div class="cm-phrase">
                        <span class="cm-marker-slot" data-marker="4">
                            <span class="cm-marker" data-match="4" draggable="true">4</span>
                        </span>
                        <p>"That's M for Mike, A for Alpha, R for Romeo..."</p>
                    </div>
                    <div class="cm-phrase">
                        <span class="cm-marker-slot" data-marker="5">
                            <span class="cm-marker" data-match="5" draggable="true">5</span>
                        </span>
                        <p>"I'll send over the meeting notes straight after this call."</p>
                    </div>
                    <div class="cm-phrase">
                        <span class="cm-marker-slot" data-marker="6">
                            <span class="cm-marker" data-match="6" draggable="true">6</span>
                        </span>
                        <p>"Hi, this is [name] returning your call from earlier."</p>
                    </div>
                </div>
                <div class="cm-answers">
                    <div class="cm-answer" data-match="6">
                        <div class="cm-answer-slot"></div>
                        <p>You're calling someone back who tried to reach you.</p>
                    </div>
                    <div class="cm-answer" data-match="1">
                        <div class="cm-answer-slot"></div>
                        <p>The other person is speaking too quietly.</p>
                    </div>
                    <div class="cm-answer" data-match="4">
                        <div class="cm-answer-slot"></div>
                        <p>You need to spell out a name or code clearly.</p>
                    </div>
                    <div class="cm-answer" data-match="2">
                        <div class="cm-answer-slot"></div>
                        <p>You want to double-check an important detail.</p>
                    </div>
                    <div class="cm-answer" data-match="3">
                        <div class="cm-answer-slot"></div>
                        <p>The audio quality is very poor and affecting communication.</p>
                    </div>
                    <div class="cm-answer" data-match="5">
                        <div class="cm-answer-slot"></div>
                        <p>You're wrapping up and confirming next steps.</p>
                    </div>
                </div>
            </div>
            <button class="check-btn" onclick="checkCompactMatching('compactMatching1')">Check Answers</button>
            <button class="reset-btn" onclick="resetCompactMatching('compactMatching1')">Reset</button>
            <div class="feedback" id="compactMatching1Feedback"></div>

            <div class="discussion-note">
                <h4>üéØ Pronunciation Tip</h4>
                <p>When using the phonetic alphabet (Alpha, Bravo, Charlie...), speak slowly and clearly. This is especially important for email addresses, reference numbers, and names.</p>
            </div>
        </section>

        <!-- Controlled Practice 2: Sentence Ordering -->
        <section class="section" id="activity3">
            <div class="section-header">
                <span class="section-number">Activity 3</span>
                <h2>Building Phone Call Phrases</h2>
            </div>
            <p class="section-intro">Put the words in the correct order to make useful phone call phrases. Drag the words to rearrange them.</p>

            <div class="sentence-ordering-activity" id="sentenceActivity">
                <div class="sentence-exercise" data-sentence="1">
                    <div class="sentence-context">Opening a call:</div>
                    <div class="word-bank" data-correct="I'm calling regarding the contract renewal.">
                        <div class="draggable-word" draggable="true">the</div>
                        <div class="draggable-word" draggable="true">I'm</div>
                        <div class="draggable-word" draggable="true">renewal.</div>
                        <div class="draggable-word" draggable="true">calling</div>
                        <div class="draggable-word" draggable="true">contract</div>
                        <div class="draggable-word" draggable="true">regarding</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="2">
                    <div class="sentence-context">Asking for clarification:</div>
                    <div class="word-bank" data-correct="Could you say that again, please?">
                        <div class="draggable-word" draggable="true">please?</div>
                        <div class="draggable-word" draggable="true">that</div>
                        <div class="draggable-word" draggable="true">you</div>
                        <div class="draggable-word" draggable="true">Could</div>
                        <div class="draggable-word" draggable="true">again,</div>
                        <div class="draggable-word" draggable="true">say</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="3">
                    <div class="sentence-context">Handling technical issues:</div>
                    <div class="word-bank" data-correct="There seems to be an echo on the line.">
                        <div class="draggable-word" draggable="true">line.</div>
                        <div class="draggable-word" draggable="true">an</div>
                        <div class="draggable-word" draggable="true">There</div>
                        <div class="draggable-word" draggable="true">the</div>
                        <div class="draggable-word" draggable="true">echo</div>
                        <div class="draggable-word" draggable="true">on</div>
                        <div class="draggable-word" draggable="true">seems</div>
                        <div class="draggable-word" draggable="true">be</div>
                        <div class="draggable-word" draggable="true">to</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="4">
                    <div class="sentence-context">Checking you understood correctly:</div>
                    <div class="word-bank" data-correct="So just to clarify, the meeting is on Thursday?">
                        <div class="draggable-word" draggable="true">Thursday?</div>
                        <div class="draggable-word" draggable="true">clarify,</div>
                        <div class="draggable-word" draggable="true">So</div>
                        <div class="draggable-word" draggable="true">on</div>
                        <div class="draggable-word" draggable="true">meeting</div>
                        <div class="draggable-word" draggable="true">to</div>
                        <div class="draggable-word" draggable="true">is</div>
                        <div class="draggable-word" draggable="true">the</div>
                        <div class="draggable-word" draggable="true">just</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="5">
                    <div class="sentence-context">Closing a call:</div>
                    <div class="word-bank" data-correct="I'll follow up with an email this afternoon.">
                        <div class="draggable-word" draggable="true">with</div>
                        <div class="draggable-word" draggable="true">I'll</div>
                        <div class="draggable-word" draggable="true">afternoon.</div>
                        <div class="draggable-word" draggable="true">this</div>
                        <div class="draggable-word" draggable="true">up</div>
                        <div class="draggable-word" draggable="true">an</div>
                        <div class="draggable-word" draggable="true">follow</div>
                        <div class="draggable-word" draggable="true">email</div>
                    </div>
                </div>
            </div>
            <button class="check-btn" onclick="checkSentenceOrder()">Check Answers</button>
            <button class="reset-btn" onclick="resetSentenceOrder()">Reset</button>
            <div class="feedback" id="sentenceFeedback"></div>
        </section>

        <!-- Guided Production: Planning a Call -->
        <section class="section" id="activity4">
            <div class="section-header">
                <span class="section-number">Activity 4</span>
                <h2>Plan Your Phone Call</h2>
            </div>
            <p class="section-intro">Read the scenario below. Plan what you would say at each stage of the call, using phrases from this lesson.</p>

            <div class="scenario-box">
                <div class="scenario-icon-large">üìû</div>
                <h3>The Scenario</h3>
                <p>You need to call a supplier to discuss a delayed shipment. You want to find out when the products will arrive and negotiate a discount for the inconvenience. The supplier's name is Mr. Kowalski.</p>
            </div>

            <div class="planning-grid">
                <div class="planning-card">
                    <h4>üìû Your Opening</h4>
                    <p>How will you introduce yourself and state the purpose of the call?</p>
                    <textarea class="notes-input" placeholder="Good morning, this is... I'm calling regarding..."></textarea>
                </div>
                <div class="planning-card">
                    <h4>üîç Clarifying Information</h4>
                    <p>Write 2 phrases you might need if you don't understand something.</p>
                    <textarea class="notes-input" placeholder="1. &#10;2. "></textarea>
                </div>
                <div class="planning-card">
                    <h4>üëã Closing the Call</h4>
                    <p>How will you end the call professionally and confirm next steps?</p>
                    <textarea class="notes-input" placeholder="Thanks for your time. I'll..."></textarea>
                </div>
            </div>

            <div class="practice-prompt">
                <h4>üí¨ Practice</h4>
                <p>Share your plan with your teacher. They will give you feedback before you move to the role play.</p>
            </div>
        </section>

        <!-- Freer Practice: Role Play -->
        <section class="section" id="activity5">
            <div class="section-header">
                <span class="section-number">Activity 5</span>
                <h2>Role Play: Phone Call Simulations</h2>
            </div>
            <p class="section-intro">Choose a scenario card and practise a phone call with your teacher. Remember: you can't see each other, so verbal communication is key.</p>

            <div class="scenario-cards">
                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">üì¶</div>
                    <h4>The Delayed Delivery</h4>
                    <p>Call a supplier about a shipment that's two weeks late. You need it urgently for a client presentation.</p>
                    <div class="scenario-goals">
                        <span>Goals:</span> Get a new delivery date, request compensation, stay professional.
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">üìÖ</div>
                    <h4>Scheduling a Meeting</h4>
                    <p>Call a client to arrange a video conference with their team. You need to find a time that works for people in different time zones.</p>
                    <div class="scenario-goals">
                        <span>Goals:</span> Propose times, handle scheduling conflicts, confirm details clearly.
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">‚ö†Ô∏è</div>
                    <h4>Technical Difficulties</h4>
                    <p>You're on a video call but keep experiencing audio problems ‚Äî echoes, delays, and drops. You need to troubleshoot while continuing the meeting.</p>
                    <div class="scenario-goals">
                        <span>Goals:</span> Describe the problem, suggest solutions, keep the meeting productive.
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">üí¨</div>
                    <h4>Taking a Message</h4>
                    <p>You answer a call for a colleague who is unavailable. The caller has an urgent request and gives you several details to pass on.</p>
                    <div class="scenario-goals">
                        <span>Goals:</span> Get all the information, confirm spelling/numbers, promise follow-up.
                    </div>
                </div>
            </div>

            <div class="discussion-note">
                <h4>üéØ Role Play Tips</h4>
                <p>Turn away from your teacher or close your eyes to simulate a real phone call. Focus on speaking clearly, using clarification phrases, and confirming key details.</p>
            </div>
        </section>

        <!-- Wrap Up: Voicemail Practice -->
        <section class="section wrap-up" id="wrapup">
            <div class="section-header">
                <span class="section-number">Wrap Up</span>
                <h2>Leaving a Voicemail</h2>
            </div>
            
            <p class="section-intro">A good voicemail should be brief, clear, and include all necessary information. Plan and practise leaving a voicemail message.</p>

            <div class="language-box">
                <h4>üì± Voicemail Structure</h4>
                <ul>
                    <li><strong>Greeting & Name:</strong> "Hi, this is [your name] from [company]."</li>
                    <li><strong>Reason for calling:</strong> "I'm calling about..." / "I'm calling regarding..."</li>
                    <li><strong>Key information:</strong> Keep it brief ‚Äî one or two main points.</li>
                    <li><strong>Contact details:</strong> "You can reach me on [number]."</li>
                    <li><strong>Closing:</strong> "Thanks, speak soon." / "I look forward to hearing from you."</li>
                </ul>
            </div>

            <div class="reflection-grid">
                <div class="reflection-card">
                    <h4>üìù Your Voicemail Script</h4>
                    <p>Write a voicemail for this situation: You're calling Mr. Chen about a partnership proposal. You sent him documents last week and want to arrange a call to discuss them.</p>
                    <textarea class="notes-input" placeholder="Hi, this is... I'm calling about..."></textarea>
                </div>
                <div class="reflection-card">
                    <h4>üåü Key Phrases to Remember</h4>
                    <p>Which 3 phrases from today will you try to use in your next phone call?</p>
                    <textarea class="notes-input" placeholder="1. &#10;2. &#10;3. "></textarea>
                </div>
            </div>
        </section>

        <!-- Lesson Completion Section -->
        <section class="section lesson-completion" id="completion">
            <div class="completion-content">
                <div class="completion-icon" id="completionIcon">üìö</div>
                <h3 id="completionTitle">You've reached the end of Lesson 5!</h3>
                <p id="completionText">Well done on completing the activities. If you're happy with your progress, mark this lesson as complete to track your journey through the course.</p>
                <div class="completion-buttons">
                    <a href="lesson4.html" class="nav-btn">‚Üê Previous Lesson</a>
                    <button class="complete-lesson-btn" id="completeBtn" onclick="toggleLessonCompletion()">
                        <span class="btn-icon">‚úì</span>
                        <span class="btn-text">Mark as Complete</span>
                    </button>
                    <a href="index.html" class="nav-btn nav-btn-primary">üè† Home</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>Business English Course by English in Doses</p>
    </footer>

    <!-- Load activities.js as ES module -->
    <script type="module" src="js/activities.js"></script>
    <!-- Load right-wrong.js for grammar activity -->
    <script type="module" src="js/right-wrong.js"></script>
    <!-- Load compact-matching.js for matching activity -->
    <script type="module" src="js/compact-matching.js"></script>
    <!-- Load sentence-ordering.js for word ordering activity -->
    <script type="module" src="js/sentence-ordering.js"></script>
    
    <!-- Lesson completion functionality -->
    <script type="module">
        import { 
            isLessonComplete, 
            markLessonComplete, 
            markLessonIncomplete,
            getCurrentUser
        } from './js/lesson-utils.js';
        
        const LESSON_NUMBER = parseInt(document.body.dataset.lesson);
        let isComplete = false;
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async function() {
            await initializeCompletion();
        });
        
        async function initializeCompletion() {
            const username = getCurrentUser();
            if (username) {
                isComplete = await isLessonComplete(LESSON_NUMBER);
                updateCompletionUI();
            }
        }
        
        function updateCompletionUI() {
            const icon = document.getElementById('completionIcon');
            const title = document.getElementById('completionTitle');
            const text = document.getElementById('completionText');
            const btn = document.getElementById('completeBtn');
            const section = document.querySelector('.lesson-completion');
            
            if (isComplete) {
                icon.textContent = 'üéâ';
                title.textContent = 'Lesson Complete!';
                text.textContent = 'Fantastic work! You\'ve mastered phone and video call communication. Ready for the next lesson?';
                btn.innerHTML = '<span class="btn-icon">‚Ü©</span><span class="btn-text">Mark as Incomplete</span>';
                btn.classList.add('completed');
                section.classList.add('is-complete');
            } else {
                icon.textContent = 'üìö';
                title.textContent = 'You\'ve reached the end of Lesson 5!';
                text.textContent = 'Well done on completing the activities. If you\'re happy with your progress, mark this lesson as complete to track your journey through the course.';
                btn.innerHTML = '<span class="btn-icon">‚úì</span><span class="btn-text">Mark as Complete</span>';
                btn.classList.remove('completed');
                section.classList.remove('is-complete');
            }
        }
        
        window.toggleLessonCompletion = async function() {
            const username = getCurrentUser();
            if (!username) {
                alert('Please log in to track your progress.');
                return;
            }
            
            if (isComplete) {
                await markLessonIncomplete(LESSON_NUMBER);
                isComplete = false;
            } else {
                await markLessonComplete(LESSON_NUMBER);
                isComplete = true;
            }
            
            updateCompletionUI();
        };
    </script>
</body>
</html>
