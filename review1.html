<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business English | Review 1</title>
    <link rel="stylesheet" href="css/lessons.css">
    <link rel="stylesheet" href="css/drop-down.css">
    <link rel="stylesheet" href="css/compact-matching.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
</head>
<body data-lesson="13">
    <header class="header">
        <a href="index.html" class="back-link">‚Üê Back to Course</a>
        <div class="header-content">
            <div class="header-badge">Review 1</div>
            <h1>Consolidation: Lessons 1-3</h1>
            <p class="header-subtitle">Review key grammar and expressions with practical activities.</p>
        </div>
        <div class="header-decoration"></div>
    </header>

    <main class="container">
        <!-- Activity 1: Grammar Presentation -->
        <section class="section" id="activity1">
            <div class="section-header">
                <span class="section-number">Activity 1/7</span>
                <h2>Grammar Review: Verbs + -ing / to</h2>
            </div>
            <p class="section-intro">Many verbs are followed by another verb in either the <strong>-ing form</strong> or the <strong>to + infinitive form</strong>. There's no perfect rule ‚Äî you need to learn which verbs take which form.</p>

            <div class="two-column-grid">
                <div class="language-box">
                    <h4>üìò Verbs followed by -ing</h4>
                    <ul>
                        <li><strong>enjoy</strong> ‚Äì I enjoy working with clients.</li>
                        <li><strong>avoid</strong> ‚Äì We avoid making promises we can't keep.</li>
                        <li><strong>finish</strong> ‚Äì Have you finished writing the report?</li>
                        <li><strong>consider</strong> ‚Äì I'm considering changing careers.</li>
                        <li><strong>suggest</strong> ‚Äì She suggested having a meeting.</li>
                        <li><strong>mind</strong> ‚Äì Would you mind waiting?</li>
                        <li><strong>keep</strong> ‚Äì Keep trying!</li>
                        <li><strong>involve</strong> ‚Äì My role involves managing a team.</li>
                    </ul>
                </div>

                <div class="language-box">
                    <h4>üìó Verbs followed by to + infinitive</h4>
                    <ul>
                        <li><strong>want</strong> ‚Äì I want to discuss the budget.</li>
                        <li><strong>need</strong> ‚Äì We need to hire more staff.</li>
                        <li><strong>decide</strong> ‚Äì She decided to accept the offer.</li>
                        <li><strong>hope</strong> ‚Äì I hope to see you there.</li>
                        <li><strong>plan</strong> ‚Äì We're planning to expand next year.</li>
                        <li><strong>agree</strong> ‚Äì They agreed to work together.</li>
                        <li><strong>tend</strong> ‚Äì I tend to be quite organised.</li>
                        <li><strong>mean</strong> ‚Äì I meant to ask you about that.</li>
                    </ul>
                </div>
            </div>

            <div class="special-case">
                <h4>‚ö†Ô∏è Special Case: "Stop"</h4>
                <p><strong>stop + -ing</strong> = quit doing something ‚Üí <em>"I stopped smoking."</em> (I don't smoke anymore.)<br>
                <strong>stop + to</strong> = pause in order to do something ‚Üí <em>"I stopped to smoke."</em> (I paused to have a cigarette.)</p>
            </div>

            <div class="tip-box">
                <h4>üí° Tip</h4>
                <p>Many <strong>-ing verbs</strong> describe feelings or attitudes (enjoy, avoid, mind, consider). Many <strong>to verbs</strong> are about intentions or decisions (want, plan, decide, hope).</p>
            </div>

            <div class="practice-prompt">
                <h4>üí¨ Discussion</h4>
                <p>Think of something you <strong>enjoy doing</strong> at work and something you <strong>avoid doing</strong>. Tell your teacher using the correct verb form.</p>
                <p><em>Example: "I enjoy collaborating with my team, but I avoid attending unnecessary meetings."</em></p>
            </div>

            <div class="reflection-card" style="margin-top: 1.5rem;">
                <h4>üìã Notes</h4>
                <p>Space to make any notes you want.</p>
                <textarea class="notes-input" placeholder="Your notes..."></textarea>
            </div>
        </section>

        <!-- Activity 2: Grammar Check -->
        <section class="section" id="activity2">
            <div class="section-header">
                <span class="section-number">Activity 2/7</span>
                <h2>Grammar Check</h2>
            </div>
            <p class="section-intro">Choose the correct form to complete each sentence.</p>

            <div class="dropdown-activity" id="dropdownActivity1">
                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">1</span>
                    <p>My role involves
                        <select class="gap-dropdown" data-answer="managing">
                            <option value="">Select...</option>
                            <option value="managing">managing</option>
                            <option value="to manage">to manage</option>
                        </select>
                        the customer service team.
                    </p>
                </div>

                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">2</span>
                    <p>I tend
                        <select class="gap-dropdown" data-answer="to be">
                            <option value="">Select...</option>
                            <option value="being">being</option>
                            <option value="to be">to be</option>
                        </select>
                        quite direct in meetings.
                    </p>
                </div>

                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">3</span>
                    <p>Would you mind
                        <select class="gap-dropdown" data-answer="sending">
                            <option value="">Select...</option>
                            <option value="sending">sending</option>
                            <option value="to send">to send</option>
                        </select>
                        me the figures?
                    </p>
                </div>

                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">4</span>
                    <p>That reminds me, I meant
                        <select class="gap-dropdown" data-answer="to ask">
                            <option value="">Select...</option>
                            <option value="asking">asking</option>
                            <option value="to ask">to ask</option>
                        </select>
                        you about the project deadline.
                    </p>
                </div>

                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">5</span>
                    <p>She stopped
                        <select class="gap-dropdown" data-answer="to check">
                            <option value="">Select...</option>
                            <option value="checking">checking</option>
                            <option value="to check">to check</option>
                        </select>
                        her phone during the presentation. <em>(= paused in order to check it)</em>
                    </p>
                </div>

                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">6</span>
                    <p>We're considering
                        <select class="gap-dropdown" data-answer="expanding">
                            <option value="">Select...</option>
                            <option value="expanding">expanding</option>
                            <option value="to expand">to expand</option>
                        </select>
                        into the Asian market next year.
                    </p>
                </div>

                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">7</span>
                    <p>They agreed
                        <select class="gap-dropdown" data-answer="to postpone">
                            <option value="">Select...</option>
                            <option value="postponing">postponing</option>
                            <option value="to postpone">to postpone</option>
                        </select>
                        the meeting until next week.
                    </p>
                </div>

                <div class="dropdown-sentence-compact">
                    <span class="sentence-number">8</span>
                    <p>I really enjoy
                        <select class="gap-dropdown" data-answer="working">
                            <option value="">Select...</option>
                            <option value="working">working</option>
                            <option value="to work">to work</option>
                        </select>
                        with international clients.
                    </p>
                </div>
            </div>
            <button class="check-btn" onclick="checkDropdownAnswers('dropdownActivity1')">Check Answers</button>
            <button class="reset-btn" onclick="resetDropdownActivity('dropdownActivity1')">Reset</button>
            <div class="feedback" id="dropdownActivity1Feedback"></div>

            <div class="practice-prompt">
                <h4>üí¨ Discussion</h4>
                <p>Choose one of these questions and answer using the correct verb form:</p>
                <p>‚Ä¢ What do you enjoy doing in your free time?<br>
                ‚Ä¢ Is there something you keep meaning to do but haven't done yet?<br>
                ‚Ä¢ What do you hope to achieve in the next year?</p>
            </div>
        </section>

        <!-- Activity 3: Expression Sorting -->
        <section class="section" id="activity3">
            <div class="section-header">
                <span class="section-number">Activity 3/7</span>
                <h2>Expression Sorting: Describe & Connect</h2>
            </div>
            <p class="section-intro">Sort these expressions into the correct category based on their function.</p>
            
            <div class="sorting-activity">
                <div class="phrase-bank" id="phraseBank">
                    <div class="phrase" data-category="describing" draggable="true">I'm responsible for...</div>
                    <div class="phrase" data-category="describing" draggable="true">My role involves...</div>
                    <div class="phrase" data-category="describing" draggable="true">I work closely with...</div>
                    <div class="phrase" data-category="habits" draggable="true">I tend to...</div>
                    <div class="phrase" data-category="habits" draggable="true">I usually...</div>
                    <div class="phrase" data-category="habits" draggable="true">I'm quite good at...</div>
                    <div class="phrase" data-category="achievements" draggable="true">I played a key role in...</div>
                    <div class="phrase" data-category="achievements" draggable="true">One of my key achievements was...</div>
                    <div class="phrase" data-category="achievements" draggable="true">I successfully managed to...</div>
                    <div class="phrase" data-category="results" draggable="true">This led to...</div>
                    <div class="phrase" data-category="results" draggable="true">As a result...</div>
                    <div class="phrase" data-category="results" draggable="true">The outcome was...</div>
                </div>
                
                <div class="sorting-zones four-zones">
                    <div class="sort-zone" id="describingZone" data-category="describing">
                        <h4>üíº Describing Your Role</h4>
                        <p class="zone-hint">What you do at work.</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="habitsZone" data-category="habits">
                        <h4>üîÑ Habits & Tendencies</h4>
                        <p class="zone-hint">How you usually behave.</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="achievementsZone" data-category="achievements">
                        <h4>üèÜ Highlighting Achievements</h4>
                        <p class="zone-hint">Things you've accomplished.</p>
                        <div class="zone-content"></div>
                    </div>
                    <div class="sort-zone" id="resultsZone" data-category="results">
                        <h4>üìà Showing Results</h4>
                        <p class="zone-hint">Consequences and outcomes.</p>
                        <div class="zone-content"></div>
                    </div>
                </div>
            </div>
            <button class="check-btn" onclick="checkSorting()">Check Answers</button>
            <button class="reset-btn" onclick="resetSorting()">Reset</button>
            <div class="feedback" id="sortingFeedback"></div>

            <div class="practice-prompt">
                <h4>üí¨ Discussion</h4>
                <p>Use expressions from each category to talk about a hobby or interest you have:</p>
                <p><em>Example: "I'm responsible for organising our book club meetings. I tend to choose mystery novels. One of my key achievements was getting 20 people to join. This led to us meeting twice a month instead of once."</em></p>
            </div>
        </section>

        <!-- Activity 4: Flip Cards - Expressions in Context -->
        <section class="section" id="activity4">
            <div class="section-header">
                <span class="section-number">Activity 4/7</span>
                <h2>Expressions in Context</h2>
            </div>
            <p class="section-intro">Click each card to see an example of the expression used in a real context.</p>

            <div class="phrase-cards">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">I'm responsible for...</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"I'm responsible for overseeing our digital marketing strategy and managing a budget of ‚Ç¨500,000."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">I tend to...</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"I tend to start my day by reviewing my priority tasks and checking emails from international clients."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">This led to...</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"We restructured the team and improved communication. This led to a 30% increase in productivity."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">Looking back...</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"Looking back, I realise that project taught me a lot about stakeholder management."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">I played a key role in...</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"I played a key role in launching our new product line, which generated ‚Ç¨2 million in the first quarter."</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="phrase-label">Something I'm working on...</span>
                        </div>
                        <div class="flip-card-back">
                            <p>"Something I'm working on improving is my presentation skills. I've started taking a public speaking course."</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="practice-prompt">
                <h4>üí¨ Discussion</h4>
                <p>Think of something you've been working on improving recently ‚Äî at work, a hobby, or a personal skill. Tell your teacher about it using "Something I'm working on..."</p>
            </div>
        </section>

        <!-- Activity 5: NEW Compact Matching -->
        <section class="section" id="activity5">
            <div class="section-header">
                <span class="section-number">Activity 5/7</span>
                <h2>Match the Meanings</h2>
            </div>
            <p class="section-intro">Match each expression with its meaning. Drag the numbers to the correct definition, or tap a number then tap where it goes.</p>

            <div class="compact-matching" id="compactMatching1">
                <!-- Column 1: Statements -->
                <div class="cm-statements">
                    <div class="cm-statement" data-match="1">
                        <span class="cm-statement-num">1</span>
                        <p><strong>I'm responsible for...</strong></p>
                    </div>
                    <div class="cm-statement" data-match="2">
                        <span class="cm-statement-num">2</span>
                        <p><strong>My role involves...</strong></p>
                    </div>
                    <div class="cm-statement" data-match="3">
                        <span class="cm-statement-num">3</span>
                        <p><strong>That reminds me...</strong></p>
                    </div>
                    <div class="cm-statement" data-match="4">
                        <span class="cm-statement-num">4</span>
                        <p><strong>I tend to...</strong></p>
                    </div>
                    <div class="cm-statement" data-match="5">
                        <span class="cm-statement-num">5</span>
                        <p><strong>This led to...</strong></p>
                    </div>
                    <div class="cm-statement" data-match="6">
                        <span class="cm-statement-num">6</span>
                        <p><strong>I played a key role in...</strong></p>
                    </div>
                </div>

                <!-- Column 2: Markers -->
                <div class="cm-markers" id="markerBank1">
                    <div class="cm-marker-slot" data-marker="1">
                        <div class="cm-marker" data-match="1" draggable="true">1</div>
                    </div>
                    <div class="cm-marker-slot" data-marker="2">
                        <div class="cm-marker" data-match="2" draggable="true">2</div>
                    </div>
                    <div class="cm-marker-slot" data-marker="3">
                        <div class="cm-marker" data-match="3" draggable="true">3</div>
                    </div>
                    <div class="cm-marker-slot" data-marker="4">
                        <div class="cm-marker" data-match="4" draggable="true">4</div>
                    </div>
                    <div class="cm-marker-slot" data-marker="5">
                        <div class="cm-marker" data-match="5" draggable="true">5</div>
                    </div>
                    <div class="cm-marker-slot" data-marker="6">
                        <div class="cm-marker" data-match="6" draggable="true">6</div>
                    </div>
                </div>

                <!-- Column 3: Answers (shuffled) -->
                <div class="cm-answers">
                    <div class="cm-answer" data-match="5">
                        <div class="cm-answer-slot"></div>
                        <p>Showing a result or consequence.</p>
                    </div>
                    <div class="cm-answer" data-match="1">
                        <div class="cm-answer-slot"></div>
                        <p>Describing your main duties.</p>
                    </div>
                    <div class="cm-answer" data-match="4">
                        <div class="cm-answer-slot"></div>
                        <p>Describing usual behaviour.</p>
                    </div>
                    <div class="cm-answer" data-match="6">
                        <div class="cm-answer-slot"></div>
                        <p>Emphasising your contribution.</p>
                    </div>
                    <div class="cm-answer" data-match="2">
                        <div class="cm-answer-slot"></div>
                        <p>Describing what your job includes.</p>
                    </div>
                    <div class="cm-answer" data-match="3">
                        <div class="cm-answer-slot"></div>
                        <p>Changing the topic smoothly.</p>
                    </div>
                </div>
            </div>
            <button class="check-btn" onclick="checkCompactMatching('compactMatching1')">Check Answers</button>
            <button class="reset-btn" onclick="resetCompactMatching('compactMatching1')">Reset</button>
            <div class="feedback" id="compactMatching1Feedback"></div>

            <div class="practice-prompt">
                <h4>üí¨ Discussion</h4>
                <p>Your teacher will ask you about your job or daily routine. Practice smoothly changing the topic by using "That reminds me..." mid-conversation.</p>
            </div>

            <div class="reflection-card" style="margin-top: 1.5rem;">
                <h4>üìã Notes</h4>
                <p>Space to make any notes you want.</p>
                <textarea class="notes-input" placeholder="Your notes..."></textarea>
            </div>
        </section>

        <!-- Activity 6: Sentence Ordering -->
        <section class="section" id="activity6">
            <div class="section-header">
                <span class="section-number">Activity 6/7</span>
                <h2>Building Sentences</h2>
            </div>
            <p class="section-intro">Put the words in the correct order to make useful professional phrases. Drag the words to rearrange them.</p>

            <div class="sentence-ordering-activity" id="sentenceActivity">
                <div class="sentence-exercise" data-sentence="1">
                    <div class="sentence-context">Describing your responsibilities:</div>
                    <div class="word-bank" data-correct="I'm responsible for managing the budget.">
                        <div class="draggable-word" draggable="true">budget.</div>
                        <div class="draggable-word" draggable="true">responsible</div>
                        <div class="draggable-word" draggable="true">the</div>
                        <div class="draggable-word" draggable="true">I'm</div>
                        <div class="draggable-word" draggable="true">managing</div>
                        <div class="draggable-word" draggable="true">for</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="2">
                    <div class="sentence-context">Describing your habits:</div>
                    <div class="word-bank" data-correct="I tend to be quite organised.">
                        <div class="draggable-word" draggable="true">organised.</div>
                        <div class="draggable-word" draggable="true">be</div>
                        <div class="draggable-word" draggable="true">I</div>
                        <div class="draggable-word" draggable="true">quite</div>
                        <div class="draggable-word" draggable="true">tend</div>
                        <div class="draggable-word" draggable="true">to</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="3">
                    <div class="sentence-context">Showing results:</div>
                    <div class="word-bank" data-correct="This led to a significant increase in sales.">
                        <div class="draggable-word" draggable="true">sales.</div>
                        <div class="draggable-word" draggable="true">in</div>
                        <div class="draggable-word" draggable="true">This</div>
                        <div class="draggable-word" draggable="true">increase</div>
                        <div class="draggable-word" draggable="true">led</div>
                        <div class="draggable-word" draggable="true">significant</div>
                        <div class="draggable-word" draggable="true">to</div>
                        <div class="draggable-word" draggable="true">a</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="4">
                    <div class="sentence-context">Highlighting an achievement:</div>
                    <div class="word-bank" data-correct="I played a key role in the project.">
                        <div class="draggable-word" draggable="true">project.</div>
                        <div class="draggable-word" draggable="true">key</div>
                        <div class="draggable-word" draggable="true">I</div>
                        <div class="draggable-word" draggable="true">the</div>
                        <div class="draggable-word" draggable="true">played</div>
                        <div class="draggable-word" draggable="true">in</div>
                        <div class="draggable-word" draggable="true">a</div>
                        <div class="draggable-word" draggable="true">role</div>
                    </div>
                </div>

                <div class="sentence-exercise" data-sentence="5">
                    <div class="sentence-context">Reflecting on experience:</div>
                    <div class="word-bank" data-correct="Looking back, I learned a lot.">
                        <div class="draggable-word" draggable="true">lot.</div>
                        <div class="draggable-word" draggable="true">Looking</div>
                        <div class="draggable-word" draggable="true">I</div>
                        <div class="draggable-word" draggable="true">a</div>
                        <div class="draggable-word" draggable="true">back,</div>
                        <div class="draggable-word" draggable="true">learned</div>
                    </div>
                </div>
            </div>
            <button class="check-btn" onclick="checkSentenceOrder()">Check Answers</button>
            <button class="reset-btn" onclick="resetSentenceOrder()">Reset</button>
            <div class="feedback" id="sentenceFeedback"></div>

            <div class="practice-prompt">
                <h4>üí¨ Discussion</h4>
                <p>Use the sentence "Looking back, I learned a lot" as a starting point. Tell your teacher about something you learned from ‚Äî it could be a trip, a course, a relationship, or a challenge.</p>
            </div>
        </section>

        <!-- Activity 7: Final Role Play -->
        <section class="section wrap-up" id="activity7">
            <div class="section-header">
                <span class="section-number">Activity 7/7</span>
                <h2>Putting It All Together</h2>
            </div>
            <p class="section-intro">Choose a scenario and have a conversation with your teacher. Use as many expressions from today as you can.</p>

            <div class="scenario-cards">
                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">ü§ù</div>
                    <h4>Networking Event</h4>
                    <p>You meet someone in a similar industry at a conference. Introduce yourself and discuss your roles.</p>
                    <div class="scenario-goals">
                        <span>Target:</span> I'm responsible for, My role involves, I tend to.
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">üíº</div>
                    <h4>Job Interview</h4>
                    <p>An interviewer asks about your current role and a key achievement.</p>
                    <div class="scenario-goals">
                        <span>Target:</span> I played a key role in, This led to, Looking back.
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this)">
                    <div class="scenario-icon">‚òï</div>
                    <h4>Catching Up</h4>
                    <p>You bump into an old colleague. Chat about what you've both been working on.</p>
                    <div class="scenario-goals">
                        <span>Target:</span> My role involves, That reminds me, Something I'm working on.
                    </div>
                </div>
            </div>

            <div class="roleplay-tips">
                <h4>üí° Remember to:</h4>
                <ul>
                    <li>Use the target expressions naturally.</li>
                    <li>Give specific examples and details.</li>
                    <li>Use follow-up questions to keep the conversation going.</li>
                    <li>Pay attention to verb forms (-ing vs to).</li>
                </ul>
            </div>

            <div class="reflection-grid" style="margin-top: 2rem;">
                <div class="reflection-card">
                    <h4>üåü Expressions I Used Well</h4>
                    <p>Which expressions did you use successfully today?</p>
                    <textarea class="notes-input" placeholder="Write your successes here..."></textarea>
                </div>
                <div class="reflection-card">
                    <h4>üìà Areas to Keep Practising</h4>
                    <p>Which expressions or grammar points need more practice?</p>
                    <textarea class="notes-input" placeholder="Write your goals here..."></textarea>
                </div>
            </div>
        </section>

        <!-- Lesson Completion Section -->
        <section class="section lesson-completion" id="completion">
            <div class="completion-content">
                <div class="completion-icon" id="completionIcon">üìö</div>
                <h3 id="completionTitle">You've completed Review 1!</h3>
                <p id="completionText">Great work consolidating what you've learned. Mark this review as complete when you're ready.</p>
                <div class="completion-buttons">
                    <a href="lesson3.html" class="nav-btn">‚Üê Lesson 3</a>
                    <button class="complete-lesson-btn" id="completeBtn" onclick="toggleLessonCompletion()">
                        <span class="btn-icon">‚úì</span>
                        <span class="btn-text">Mark as Complete</span>
                    </button>
                    <a href="index.html" class="nav-btn nav-btn-primary">üè† Home</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>Business English Course by English in Doses.</p>
    </footer>

    <script type="module" src="js/activities.js"></script>
    <script type="module" src="js/drop-down.js"></script>
    <script type="module" src="js/sentence-ordering.js"></script>
    <script type="module" src="js/compact-matching.js"></script>
    
    <script type="module">
        import { 
            isLessonComplete, 
            markLessonComplete, 
            markLessonIncomplete,
            getCurrentUser
        } from './js/lesson-utils.js';
        
        const LESSON_NUMBER = 13;
        let isComplete = false;
        
        document.addEventListener('DOMContentLoaded', async function() {
            const username = getCurrentUser();
            if (username) {
                isComplete = await isLessonComplete(LESSON_NUMBER);
                updateCompletionUI();
            }
        });
        
        function updateCompletionUI() {
            const icon = document.getElementById('completionIcon');
            const title = document.getElementById('completionTitle');
            const text = document.getElementById('completionText');
            const btn = document.getElementById('completeBtn');
            const section = document.querySelector('.lesson-completion');
            
            if (isComplete) {
                icon.textContent = 'üéâ';
                title.textContent = 'Review Complete!';
                text.textContent = 'Excellent work! You\'ve consolidated your learning from Lessons 1-3.';
                btn.innerHTML = '<span class="btn-icon">‚Ü©</span><span class="btn-text">Mark as Incomplete</span>';
                btn.classList.add('completed');
                section.classList.add('is-complete');
            } else {
                icon.textContent = 'üìö';
                title.textContent = 'You\'ve completed Review 1!';
                text.textContent = 'Great work consolidating what you\'ve learned. Mark this review as complete when you\'re ready.';
                btn.innerHTML = '<span class="btn-icon">‚úì</span><span class="btn-text">Mark as Complete</span>';
                btn.classList.remove('completed');
                section.classList.remove('is-complete');
            }
        }
        
        window.toggleLessonCompletion = async function() {
            const btn = document.getElementById('completeBtn');
            const username = getCurrentUser();
            
            if (!username) {
                alert('Please log in on the homepage first to track your progress.');
                return;
            }
            
            btn.disabled = true;
            btn.style.opacity = '0.7';
            
            try {
                if (isComplete) {
                    await markLessonIncomplete(LESSON_NUMBER);
                    isComplete = false;
                } else {
                    await markLessonComplete(LESSON_NUMBER);
                    isComplete = true;
                }
                updateCompletionUI();
            } catch (error) {
                console.error('Error toggling completion:', error);
                alert('There was an error saving your progress. Please try again.');
            } finally {
                btn.disabled = false;
                btn.style.opacity = '1';
            }
        };
    </script>
</body>
</html>
